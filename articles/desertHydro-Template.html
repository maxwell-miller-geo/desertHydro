<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>desertHydro-Template • desertHydro</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="desertHydro-Template">
<meta property="og:description" content="desertHydro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">desertHydro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/desertHydro-Template.html">desertHydro-Template</a>
    </li>
    <li>
      <a href="../articles/watershedWorkflow.html">watershedWorkflow</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>desertHydro-Template</h1>
            
      
      
      <div class="hidden name"><code>desertHydro-Template.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">desertHydro</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.71</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># For plotting</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gganimate.com" class="external-link">gganimate</a></span><span class="op">)</span> <span class="co"># For animations</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'gganimate'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:terra':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     animate</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/opengeos/whiteboxR" class="external-link">whitebox</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: whitebox</span></span>
<span><span class="fu">whitebox</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/whitebox/man/wbt_init.html" class="external-link">wbt_init</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># initiation whitebox</span></span></code></pre></div>
<div class="section level2">
<h2 id="r-rainfall_method---spatial-date---2022-08-27-optional---if-dates-present-must-be-in-yyyy-mm-dd-format-type---paste0test--rainfall_method-carve-important-steps-modelfolder---file-pathrcthesisarid-land-hydrologydatawaterholeoutputssensitivitytests-type-replace-path-to-folder-where-model-is-saved-watershedelements---paste0rcthesisarid-land-hydrologyrexample-typewatershedelements-replace-this-with-your-folder-watershedelements---rcthesisarid-land-hydrologyrwatershedelements-watershedelements---rcpackagedevdeserthydroinstextdatademoelements-replace-this-with-your-watershed-elements-folder-demfile---dem-tif-dem-file-to-simulate-over-boundary---test-boundary-shp-optional-boundary---boundary-shp-optional-boundary---waterholes_shape-shp-optional-boundary---mini_ws-shp-optional-landcoverfile---soils-shp-landcovercharacteristics---landcovercharacteristics_soils-xlsx-key---musym-key-is-present-in-both-the-landcoverfile-and-the-land-cover-characteristics-rainfile---usgs_rain_2001_2021-xlsx-dischargefile---example_discharge-csv-discharge---f-if-true-expects-discharge-present-in-file-if-rainfall-method-is-synthetic---uses-12-inch---15-minute-storm-length---10-grid-cell-length---assumes-uniform-grid-store-t-time_step---112-time-step-in-minutes-simulation_length---2-time-length-in-minutes-impervious---t-no-infiltration-overwrite---f-overwrite-previous-inputs-in-both-watershed-elements-and-model-folder-write---t-create-graphs-and-write-outputs-to-model-folder-restartmodel---t-if-model-is-paused-mid-run-can-be-restarted-with-same-inputs-gif---f-if-true-gifs-will-be-created-automatically--can-be-created-at-the-end">
<code>{r} # rainfall_method &lt;- "spatial"  # date &lt;- "2022-08-27" # Optional - if dates present must be in YYYY-MM-DD format # type &lt;- paste0("test-", rainfall_method,"-carve") # # Important steps # ModelFolder &lt;- file.path(r"(C:\Thesis\Arid-Land-Hydrology\Data\Waterhole\Outputs\SensitivityTests)", type) # replace path to folder where model is saved # #WatershedElements &lt;- paste0(r"(C:\Thesis\Arid-Land-Hydrology\R\Example\)", type,"WatershedElements") # replace this with your folder # WatershedElements &lt;- r"(C:\Thesis\Arid-Land-Hydrology\R\WatershedElements)" #  # # WatershedElements &lt;- r"(C:\PackageDev/desertHydro/inst/extdata/DemoElements/)" # replace this with your watershed elements folder # demFile &lt;- "dem.tif" # DEM file to simulate over # boundary &lt;- "test-boundary.shp" # Optional # #boundary &lt;- "boundary.shp" # Optional # #boundary &lt;- "waterholes_shape.shp" # Optional # #boundary &lt;- "mini_ws.shp" # Optional # landCoverFile &lt;- "soils.shp" # LandCoverCharacteristics &lt;- "LandCoverCharacteristics_soils.xlsx" # key &lt;- "MUSYM" # key is present in both the landcoverfile and the land cover characteristics #  # rainFile &lt;- "USGS_Rain_2001_2021.xlsx" # dischargeFile &lt;- "example_discharge.csv" # discharge &lt;-  F # If TRUE, expects discharge present in file #  # # If rainfall method is synthetic - uses 1/2 inch - 15 minute storm #  # length &lt;- 10 # grid cell length - assumes uniform grid # store = T # time_step &lt;- 1/12 # time step in minutes # simulation_length &lt;- 2 # time length in minutes # impervious &lt;- T # no infiltration # overwrite &lt;- F # overwrite previous inputs in both watershed elements and model folder # write &lt;- T # create graphs and write outputs to model folder # restartModel &lt;- T # If model is paused mid-run, can be restarted with same inputs # gif &lt;- F # If TRUE, gif's will be created automatically. Can be created at the end #</code><a class="anchor" aria-label="anchor" href="#r-rainfall_method---spatial-date---2022-08-27-optional---if-dates-present-must-be-in-yyyy-mm-dd-format-type---paste0test--rainfall_method-carve-important-steps-modelfolder---file-pathrcthesisarid-land-hydrologydatawaterholeoutputssensitivitytests-type-replace-path-to-folder-where-model-is-saved-watershedelements---paste0rcthesisarid-land-hydrologyrexample-typewatershedelements-replace-this-with-your-folder-watershedelements---rcthesisarid-land-hydrologyrwatershedelements-watershedelements---rcpackagedevdeserthydroinstextdatademoelements-replace-this-with-your-watershed-elements-folder-demfile---dem-tif-dem-file-to-simulate-over-boundary---test-boundary-shp-optional-boundary---boundary-shp-optional-boundary---waterholes_shape-shp-optional-boundary---mini_ws-shp-optional-landcoverfile---soils-shp-landcovercharacteristics---landcovercharacteristics_soils-xlsx-key---musym-key-is-present-in-both-the-landcoverfile-and-the-land-cover-characteristics-rainfile---usgs_rain_2001_2021-xlsx-dischargefile---example_discharge-csv-discharge---f-if-true-expects-discharge-present-in-file-if-rainfall-method-is-synthetic---uses-12-inch---15-minute-storm-length---10-grid-cell-length---assumes-uniform-grid-store-t-time_step---112-time-step-in-minutes-simulation_length---2-time-length-in-minutes-impervious---t-no-infiltration-overwrite---f-overwrite-previous-inputs-in-both-watershed-elements-and-model-folder-write---t-create-graphs-and-write-outputs-to-model-folder-restartmodel---t-if-model-is-paused-mid-run-can-be-restarted-with-same-inputs-gif---f-if-true-gifs-will-be-created-automatically--can-be-created-at-the-end"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section"></h2>
</div>
<div class="section level2">
<h2 id="r-check-files-check-if-the-necessary-folders-are-present-folderstocheck---cmodelfolder-watershedelements-folders---sapplyfolderstocheck-fun-file-exists-ifallfolders-printpaste0all-folders-are-not-found--here-is-a-list-of-folders-not-found--printfolders-check-if-the-necessary-files-are-present-filestocheck---cdemfile-boundary-landcoverfile-landcovercharacteristics-rainfile-dischargefile-filescheck---sapplyfile-pathwatershedelements-filestocheck-fun-file-exists-ifallfilescheck-printall-files-are-not-found--here-is-a-list-of-the-files-present--printfilescheck-else-printall-files-found-">
<code>{r, check files} # # Check if the necessary folders are present # foldersToCheck &lt;- c(ModelFolder, WatershedElements) # folders &lt;- sapply(foldersToCheck, FUN = file.exists) # if(!all(folders)){ #   print(paste0("All folders are not found. Here is a list of folders not found.")) #   print(folders) # } # # Check if the necessary files are present # filesToCheck &lt;- c(demFile, boundary, landCoverFile, LandCoverCharacteristics, rainFile, dischargeFile) # filesCheck &lt;- sapply(file.path(WatershedElements, filesToCheck), FUN = file.exists) # if(!all(filesCheck)){ #   print("All files are not found. Here is a list of the files present.") #   print(filesCheck) # }else{ #   print("All files found.") # } #</code><a class="anchor" aria-label="anchor" href="#r-check-files-check-if-the-necessary-folders-are-present-folderstocheck---cmodelfolder-watershedelements-folders---sapplyfolderstocheck-fun-file-exists-ifallfolders-printpaste0all-folders-are-not-found--here-is-a-list-of-folders-not-found--printfolders-check-if-the-necessary-files-are-present-filestocheck---cdemfile-boundary-landcoverfile-landcovercharacteristics-rainfile-dischargefile-filescheck---sapplyfile-pathwatershedelements-filestocheck-fun-file-exists-ifallfilescheck-printall-files-are-not-found--here-is-a-list-of-the-files-present--printfilescheck-else-printall-files-found-"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-1"></h2>
</div>
<div class="section level2">
<h2 id="r-a---arid_modelmodelfolder-watershedelements-date-date-demfile-demfile-boundary-boundary-landcoverfile-landcoverfile-landcovercharacteristics-landcovercharacteristics-key-key-impervious-impervious-rainfall_method-rainfall_method-store-store-gif-gif-discharge-discharge-time_step-time_step-simulation_length-simulation_length-overwrite-overwrite-write-write-restartmodel-restartmodel-soilstack---terrarastfile-pathmodelfolder-model_soil_stack-tif">
<code>{r} # a &lt;- arid_model(ModelFolder, #                 WatershedElements, #                 date = date, #                 demFile = demFile, #                 boundary = boundary, #                 landCoverFile = landCoverFile, #                 LandCoverCharacteristics = LandCoverCharacteristics, #                 key = key, #                 impervious = impervious, #                 rainfall_method = rainfall_method, #                 store = store, #                 gif = gif, #                 discharge = discharge, #                 time_step = time_step, #                 simulation_length = simulation_length, #                 overwrite = overwrite, #                 write = write, #                 restartModel = restartModel #                 ) # SoilStack &lt;- terra::rast(file.path(ModelFolder, "model_soil_stack.tif")) #</code><a class="anchor" aria-label="anchor" href="#r-a---arid_modelmodelfolder-watershedelements-date-date-demfile-demfile-boundary-boundary-landcoverfile-landcoverfile-landcovercharacteristics-landcovercharacteristics-key-key-impervious-impervious-rainfall_method-rainfall_method-store-store-gif-gif-discharge-discharge-time_step-time_step-simulation_length-simulation_length-overwrite-overwrite-write-write-restartmodel-restartmodel-soilstack---terrarastfile-pathmodelfolder-model_soil_stack-tif"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-2"></h2>
</div>
<div class="section level2">
<h2 id="r-plot-the-maximum-values-for-each-cell-surfacestorage---terrarastfile-pathmodelfolder-surfacestorage-tif-maxdepth---maxsurfacestorage-terrawriterastermaxdepth-file-pathmodelfolder-max-depth-map-tif-plotmaxdepth-velocitystorage---terrarastfile-pathmodelfolder-velocitystorage-tif-maxvelocity---maxvelocitystorage-terrawriterastermaxvelocity-file-pathmodelfolder-max-velocity-map-tif-plotmaxvelocity-slope---soilstackslope-dem---terrarastfile-pathmodelfolder-model_dem-tif-plot-values-that-are-a-little-to-high---maybe-plotmaxdepth-30-plotmaxvelocity-4-terrawriterastermaxdepth-30-file-pathmodelfolder-greaterthan30cm-tif-terrawriterastermaxvelocity-4-file-pathmodelfolder-greaterthan4ms-tif-stream-section-stream---terravectfile-pathwatershedelements-stream_path-shp-load-in-created-mainstem-in-qgis-ms---terravectfile-pathwatershedelements-main-stem-shp-crsassignfile-pathwatershedelements-main-stem-shp-stream---ms-dem---terrarastbreach_test-model_dem_rast---terrarastfile-pathmodelfolder-model_dem-tif-ogdem---terrarastfile-pathwatershedelements-dem-tif-plotogdem---model_dem_rast-dem---model_dem_rast-extract-values-along-stream-demext---terraextractdem-stream-depthext---terraextractmaxdepth-stream-xy-t-velext---terraextractmaxvelocity-stream-slopeext---terraextractslope-stream-stream_x---nrowdemext-x---1stream_x-vvalues---c75-97-112-138-147-194-200-combine-datasets-df---data-framex-x-dem-demextmodel_dem-demg---ggplotdf-geom_lineaesx-dem-geom_vlinexintercept-vvalues-color-grey-df---data-framex-x-depth-depthextmax-velocity-velextmax-slope-slopeextslope-dem-demextmodel_dem-plot-values-labelx---distance-from-gauge-cells-velocityg---ggplotdf-geom_pointaesx-velocity-colour-red-shape-square-labstitle-canyon-stream-properties-xlab-ylabvelocity-ms-theme_minimal-themeplot-title-element_texthjust-0-5-geom_vlinexintercept-vvalues-color-grey-depthg---ggplotdf-geom_pointaesx-depth-color-blue-shape-circlexlab-ylabmaximum-depth-cm-theme_minimal-geom_vlinexintercept-vvalues-color-grey-slopeg---ggplotdf-geom_pointaesx-slope-color-black-shape-diamondxlablabelx-ylabslope-theme_minimal-geom_vlinexintercept-vvalues-color-grey-demg---ggplotdf-geom_lineaesx-dem-geom_vlinexintercept-vvalues-color-grey-librarygridextra-comb---gridextragrid-arrangevelocityg-depthg-slopeg-demg-ggsavefile-pathmodelfolder-stream_props-png-plot-comb-width-8-height-8-plotx-depthextmax">
<code>{r} #  # # Plot the maximum values for each cell # surfaceStorage &lt;- terra::rast(file.path(ModelFolder, "surfaceStorage.tif")) # maxDepth &lt;- max(surfaceStorage) # terra::writeRaster(maxDepth, file.path(ModelFolder, "max-depth-map.tif")) #  # #plot(maxDepth) # velocityStorage &lt;- terra::rast(file.path(ModelFolder, "velocityStorage.tif")) # maxVelocity &lt;- max(velocityStorage) # terra::writeRaster(maxVelocity, file.path(ModelFolder, "max-velocity-map.tif")) # #plot(maxVelocity) # slope &lt;- SoilStack$slope # dem &lt;- terra::rast(file.path(ModelFolder, "model_dem.tif")) # # Plot values that are a little to high - maybe # plot(maxDepth &gt; 30) # plot(maxVelocity &gt; 4) # terra::writeRaster(maxDepth &gt; 30, file.path(ModelFolder, "greaterThan30cm.tif")) # terra::writeRaster(maxVelocity &gt; 4, file.path(ModelFolder, "greaterThan4ms.tif")) #  # # stream section # stream &lt;- terra::vect(file.path(WatershedElements, "stream_path.shp")) # # Load in created mainstem in QGIS # # ms &lt;- terra::vect(file.path(WatershedElements, "main-stem.shp")) # # crsAssign(file.path(WatershedElements, "main-stem.shp")) # stream &lt;- ms # # dem &lt;- terra::rast(breach_test) # model_dem_rast &lt;- terra::rast(file.path(ModelFolder, "model_dem.tif"))  # ogdem &lt;- terra::rast(file.path(WatershedElements, "dem.tif")) #  # plot(ogdem - model_dem_rast) # dem &lt;- model_dem_rast # # Extract values along stream # demExt &lt;- terra::extract(dem, stream) # depthExt &lt;- terra::extract(maxDepth, stream, xy = T) # velExt &lt;- terra::extract(maxVelocity, stream) # slopeExt &lt;- terra::extract(slope, stream) # stream_x &lt;- nrow(demExt) # x &lt;- 1:stream_x # vValues &lt;- c(75, 97, 112, 138, 147, 194, 200) # # Combine datasets # df &lt;- data.frame(x = x, dem = demExt$model_dem) #  # demG &lt;- ggplot(df) + geom_line(aes(x, dem)) + geom_vline(xintercept = vValues, color = "grey") #  # df &lt;- data.frame(x = x, depth = depthExt$max, velocity = velExt$max, slope = slopeExt$slope, dem = demExt$model_dem) # # Plot values # labelx &lt;- "Distance from Gauge (# cells)" # velocityG &lt;- ggplot(df) + geom_point(aes(x, velocity), colour = "red", shape = "square") + #   labs(title = "Canyon Stream Properties") + xlab("") + ylab("Velocity (m/s)")+ theme_minimal() + #   theme(plot.title = element_text(hjust = 0.5)) + geom_vline(xintercept = vValues, color = "grey") #  # depthG &lt;- ggplot(df) + geom_point(aes(x, depth), color = "blue", shape = "circle")+xlab("") + ylab("Maximum depth (cm)") + theme_minimal() + geom_vline(xintercept = vValues, color = "grey") #  # slopeG &lt;- ggplot(df) + geom_point(aes(x, slope), color = "black", shape = "diamond")+xlab(labelx) + ylab("Slope (°)") + theme_minimal() + geom_vline(xintercept = vValues, color = "grey") #  # demG &lt;- ggplot(df) + geom_line(aes(x, dem))+ geom_vline(xintercept = vValues, color = "grey") # library(gridExtra) #  # comb &lt;- gridExtra::grid.arrange(velocityG, depthG, slopeG, demG) # ggsave(file.path(ModelFolder, "stream_props.png"), plot = comb, width = 8, height = 8) #  # plot(x, depthExt$max) #  #</code><a class="anchor" aria-label="anchor" href="#r-plot-the-maximum-values-for-each-cell-surfacestorage---terrarastfile-pathmodelfolder-surfacestorage-tif-maxdepth---maxsurfacestorage-terrawriterastermaxdepth-file-pathmodelfolder-max-depth-map-tif-plotmaxdepth-velocitystorage---terrarastfile-pathmodelfolder-velocitystorage-tif-maxvelocity---maxvelocitystorage-terrawriterastermaxvelocity-file-pathmodelfolder-max-velocity-map-tif-plotmaxvelocity-slope---soilstackslope-dem---terrarastfile-pathmodelfolder-model_dem-tif-plot-values-that-are-a-little-to-high---maybe-plotmaxdepth-30-plotmaxvelocity-4-terrawriterastermaxdepth-30-file-pathmodelfolder-greaterthan30cm-tif-terrawriterastermaxvelocity-4-file-pathmodelfolder-greaterthan4ms-tif-stream-section-stream---terravectfile-pathwatershedelements-stream_path-shp-load-in-created-mainstem-in-qgis-ms---terravectfile-pathwatershedelements-main-stem-shp-crsassignfile-pathwatershedelements-main-stem-shp-stream---ms-dem---terrarastbreach_test-model_dem_rast---terrarastfile-pathmodelfolder-model_dem-tif-ogdem---terrarastfile-pathwatershedelements-dem-tif-plotogdem---model_dem_rast-dem---model_dem_rast-extract-values-along-stream-demext---terraextractdem-stream-depthext---terraextractmaxdepth-stream-xy-t-velext---terraextractmaxvelocity-stream-slopeext---terraextractslope-stream-stream_x---nrowdemext-x---1stream_x-vvalues---c75-97-112-138-147-194-200-combine-datasets-df---data-framex-x-dem-demextmodel_dem-demg---ggplotdf-geom_lineaesx-dem-geom_vlinexintercept-vvalues-color-grey-df---data-framex-x-depth-depthextmax-velocity-velextmax-slope-slopeextslope-dem-demextmodel_dem-plot-values-labelx---distance-from-gauge-cells-velocityg---ggplotdf-geom_pointaesx-velocity-colour-red-shape-square-labstitle-canyon-stream-properties-xlab-ylabvelocity-ms-theme_minimal-themeplot-title-element_texthjust-0-5-geom_vlinexintercept-vvalues-color-grey-depthg---ggplotdf-geom_pointaesx-depth-color-blue-shape-circlexlab-ylabmaximum-depth-cm-theme_minimal-geom_vlinexintercept-vvalues-color-grey-slopeg---ggplotdf-geom_pointaesx-slope-color-black-shape-diamondxlablabelx-ylabslope-theme_minimal-geom_vlinexintercept-vvalues-color-grey-demg---ggplotdf-geom_lineaesx-dem-geom_vlinexintercept-vvalues-color-grey-librarygridextra-comb---gridextragrid-arrangevelocityg-depthg-slopeg-demg-ggsavefile-pathmodelfolder-stream_props-png-plot-comb-width-8-height-8-plotx-depthextmax"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-3"></h2>
</div>
<div class="section level2">
<h2 id="section-4"></h2>
</div>
<div class="section level2">
<h2 id="r-gif-creation-gganimate-listnframes-30-fps-3-rain-file-to-grab-the-necessary-rainfall-method-rain_file---deserthydrorainfallmethodcheckmodelfolder-rainfall_method-gifs---deserthydrogifcreationmodelfolder-rain_file-rain_file-rainfall_method-rainfall_method-discharge-discharge-savegraph-t-date-date">
<code>{r gif-creation, gganimate = list(nframes = 30, fps = 3)} # # Rain file to grab the necessary rainfall method # rain_file &lt;- desertHydro:::rainfallMethodCheck(ModelFolder, rainfall_method) # gifs &lt;- desertHydro:::gifCreation(ModelFolder, rain_file = rain_file,  #                                   rainfall_method = rainfall_method, discharge = discharge,  #                                   saveGraph = T, date = date) #</code><a class="anchor" aria-label="anchor" href="#r-gif-creation-gganimate-listnframes-30-fps-3-rain-file-to-grab-the-necessary-rainfall-method-rain_file---deserthydrorainfallmethodcheckmodelfolder-rainfall_method-gifs---deserthydrogifcreationmodelfolder-rain_file-rain_file-rainfall_method-rainfall_method-discharge-discharge-savegraph-t-date-date"></a>
</h2>
</div>
<div class="section level2">
<h2 id="r-discharge-determine-discharge-peak-and-volume-for-a-given-day-dischargedf---dailydischargedischarge_file_path-file-pathwatershedelements-example_discharge-csv-discharge_date-date-save_location-modelfolder-savegraphs-f-volume---dischargevolumedischargedf">
<code>{r, discharge} # # Determine discharge peak and volume for a given day # dischargeDF &lt;- dailyDischarge(discharge_file_path = file.path(WatershedElements, "example_discharge.csv"), #                                     discharge_date = date, #                                     save_location = ModelFolder, #                                     saveGraphs = F) # volume &lt;- dischargeVolume(dischargeDF) #  #</code><a class="anchor" aria-label="anchor" href="#r-discharge-determine-discharge-peak-and-volume-for-a-given-day-dischargedf---dailydischargedischarge_file_path-file-pathwatershedelements-example_discharge-csv-discharge_date-date-save_location-modelfolder-savegraphs-f-volume---dischargevolumedischargedf"></a>
</h2>
</div>
<div class="section level2">
<h2 id="r">```{r}<a class="anchor" aria-label="anchor" href="#r"></a>
</h2>
</div>
<div class="section level2">
<h2 id="flow-to-string"># Flow to string<a class="anchor" aria-label="anchor" href="#flow-to-string"></a>
</h2>
</div>
<div class="section level2">
<h2 id="flow_accum---terrarastfile-pathwatershedelements-flow_accumulation-tif">flow_accum &lt;- terra::rast(file.path(WatershedElements,
“flow_accumulation.tif”))<a class="anchor" aria-label="anchor" href="#flow_accum---terrarastfile-pathwatershedelements-flow_accumulation-tif"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-5"></h2>
</div>
<div class="section level2">
<h2 id="extract-mainstep---300000-cells"># Extract mainstep - 300,000 cells<a class="anchor" aria-label="anchor" href="#extract-mainstep---300000-cells"></a>
</h2>
</div>
<div class="section level2">
<h2 id="main_stem---terraifelflow_accum-200000-1-0">main_stem &lt;- terra::ifel(flow_accum &gt; 200000, 1, 0)<a class="anchor" aria-label="anchor" href="#main_stem---terraifelflow_accum-200000-1-0"></a>
</h2>
</div>
<div class="section level2">
<h2 id="writerastermain_stem-file-pathwatershedelements-main_stem-tif">writeRaster(main_stem, file.path(WatershedElements,
“main_stem.tif”))<a class="anchor" aria-label="anchor" href="#writerastermain_stem-file-pathwatershedelements-main_stem-tif"></a>
</h2>
</div>
<div class="section level2">
<h2 id="main_lines---as-linesmain_stem">main_lines &lt;- as.lines(main_stem)<a class="anchor" aria-label="anchor" href="#main_lines---as-linesmain_stem"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-6"></h2>
</div>
<div class="section level2">
<h2 id="section-7"></h2>
</div>
<div class="section level2">
<h2 id="plotmain_stem">plot(main_stem)<a class="anchor" aria-label="anchor" href="#plotmain_stem"></a>
</h2>
</div>
<div class="section level2">
<h2 id="section-8"></h2>
</div>
<div class="section level2">
<h2 id="vectorize-mainstem"># Vectorize mainstem<a class="anchor" aria-label="anchor" href="#vectorize-mainstem"></a>
</h2>
<p>```</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Maxwell Miller.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
